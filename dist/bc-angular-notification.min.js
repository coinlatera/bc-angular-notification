(function(){angular.module("bc.angular-notification",["bc.notifications","bc.notifications-builder","bc.notifications-ui","bc.active-notification","bc.sticky-notification"])}).call(this),function(){angular.module("bc.active-notification",[]).directive("activeNotification",["Notifications","NotificationsUI","$timeout","$rootScope",function(a,b,c){return{restrict:"E",template:'<div ng-show="showNotification" class="urgent-notification active" ng-class="className"><span ng-bind-html-unsafe="title"></span><div class="close"><i class="icon-remove-circle icon-large"></i></div></div>',link:function(d,e){var f,g,h,i,j;return d.showNotification=!1,h=!1,i=function(a){var b;return d.watchedCopy=a,d.$watch("watchedCopy",function(a){return a.read?g(a.id,!0,j):void 0},!0),h?void 0:(d.notification=angular.copy(a),d.title=a.title,d.className=f(a.type),null!=a.customClass&&(d.className+=" "+a.customClass),d.$$phase||d.$apply(),b=$(e[0]).find(".urgent-notification"),b.css({display:"block",top:-100}),b.animate({top:68},"slow",function(){var b,d;return d=null!=a.duration?a.duration:2e3+80*a.title.length,-1!==d?c(function(){return g(a.id,!0,j)},d):(b=function(){return $("body").unbind("click",b),g(a.id,!0,j)},$("body").bind("click",b))}))},g=function(b,c,f){return h||null==d.notification||d.notification.id!==b?void 0:(h=!0,c&&(a.markAsRead(d.notification),d.notification.read=!0),delete d.notification,$(e[0]).find(".urgent-notification").fadeOut("slow",f))},$(e[0]).find(".close").bind("click",function(){return g(d.notification.id,!0,j)}),f=function(a){return"error"===a||"urgent"===a?"orange":"pending"===a||"info"===a?"blue":"success"===a?"green":"blue"},j=function(){var a,b,c,e,f;if(h=!1,null==d.notification){for(e=d.allNotifications,f=[],b=0,c=e.length;c>b;b++)if(a=e[b],a.read||d.state.paused&&!a.urgent)f.push(void 0);else if("active"===a.display){if(null==d.notification||d.notification.read){i(a);break}f.push(void 0)}else f.push(void 0);return f}},d.$watch("allNotifications",function(a,b){return a===b||h?void 0:j()},!0),d.state=b.state(),d.$watch("state",function(a,b){if(null!=a&&null!=a.paused&&(null==b||null==b.paused||a.paused!==b.paused)){if(d.state.paused&&null!=d.notification&&!d.notification.urgent&&!h)return g(d.notification.id,!1,j);if(!h)return j()}},!0),d.allNotifications=a.all(),j()}}}])}.call(this),function(){angular.module("bc.sticky-notification",[]).directive("stickyNotification",["Notifications",function(a){return{restrict:"E",template:'<div ng-show="showNotification" class="urgent-notification sticky" ng-class="className"><span ng-bind-html-unsafe="title"></span><div class="close"><i class="icon-remove-circle icon-large"></i></div></div>',link:function(b,c){var d,e,f;return b.showNotification=!1,e=function(a){return $(c[0]).find(".urgent-notification").slideUp("slow","linear",function(){return b.notification=a,b.title=a.title,b.className=d(a.type),null!=a.customClass&&(b.className+=" "+a.customClass),b.$$phase||b.$apply(),b.$watch("notification",function(a){return a.read?$(c[0]).find(".urgent-notification").slideUp("slow","linear",f):void 0},!0),$(c[0]).find(".urgent-notification").slideDown("slow","linear")})},$(c[0]).find(".close").bind("click",function(){return a.markAsRead(b.notification),$(c[0]).find(".urgent-notification").slideUp("slow","linear",f)}),d=function(a){return"error"===a||"urgent"===a?"orange":"pending"===a||"info"===a?"blue":"success"===a?"green":"blue"},f=function(){var a,c,d,f,g;for(f=b.allNotifications,g=[],c=0,d=f.length;d>c;c++)if(a=f[c],a.read)g.push(void 0);else if("sticky"===a.display&&"urgent"===a.type){if(null!=b.notification&&a.id===b.notification.id)continue;g.push(e(a))}else g.push(void 0);return g},b.$watch("allNotifications",function(a,b){return a!==b?f():void 0},!0),b.allNotifications=a.all(),f()}}}])}.call(this),function(){angular.module("bc.notifications",[]).service("Notifications",["$rootScope",function(a){return a.notifications=[],this.all=function(){return a.notifications},this.unread=function(){var b,c,d,e,f;for(c=[],f=a.notifications,d=0,e=f.length;e>d;d++)b=f[d],b.read||c.push(b);return c},this.read=function(){var b,c,d,e,f;for(c=[],f=a.notifications,d=0,e=f.length;e>d;d++)b=f[d],b.read&&c.push(b);return c},this.markAllAsRead=function(){var b,c,d,e;for(e=a.notifications,c=0,d=e.length;d>c;c++)b=e[c],b.read=!0},this.markAsRead=function(b){var c,d,e,f,g;for(f=a.notifications,g=[],d=0,e=f.length;e>d;d++)c=f[d],c.id===b.id?g.push(c.read=!0):g.push(void 0);return g},this.show=function(b){a.notifications.push(b)}}])}.call(this),function(){angular.module("bc.notifications-builder",["bc.angular-i18n"]).service("NotificationsBuilder",["$filter",function(a){var b;return b=function(a,b){return a=a.replace(/\[blue\]([^\[]*)\[\/blue\]/,'<span class="notif-blue">$1</span>'),a=a.replace(/\[green\]([^\[]*)\[\/green\]/,'<span class="notif-green">$1</span>'),a=a.replace(/\[red\]([^\[]*)\[\/red\]/,'<span class="notif-red">$1</span>'),a=a.replace(/\[link\]([^\[]*)\[\/link\]/,'<a class="notif-link">$1</a>'),a=a.replace(/\[button\]([^\[]*)\[\/button\]/,'<a class="btn btn-primary notif-button">$1</a>'),a=a.replace(/[^\\]_([a-zA-Z0-9\$]+)_/g,function(a,c){return a[0]+b[c]}),a=a.replace(/^_([a-zA-Z0-9\$]+)_/g,function(a,c){return b[c]}),a=a.replace(/\\_/g,function(){return"_"}),a=a.replace(/\[link url=([^\]]*)\]([^\[]*)\[\/link\]/,'<a class="notif-link" href="$1">$2</a>'),a=a.replace(/\[button url=([^\]]*)\]([^\[]*)\[\/button\]/,'<a class="btn btn-primary notif-button" href="$1">$2</a>')},{buildNotification:function(c,d,e,f,g,h,i,j){return null==i&&(i={}),null==j&&(j=void 0),i.$id=Math.floor(999999*Math.random()),{id:i.$id,title:b(a("translate")(d,!0),i),detailedTitle:b(a("translate")(e,!0),i),read:!1,type:c,display:f,urgent:g,date:(new Date).getTime(),showInDropdown:h,customClass:i.customClass?i.customClass:"",duration:j}}}}])}.call(this),function(){angular.module("bc.notifications-ui",[]).service("NotificationsUI",["$rootScope",function(a){return a.state={paused:!1},this.pause=function(){return a.state.paused=!0},this.resume=function(){return a.state.paused=!1},this.state=function(){return a.state}}])}.call(this);