(function(){define(["app"],function(a){return a.directive("activeNotification",function(a,b){return{restrict:"E",template:'<div ng-show="showNotification" class="urgent-notification active" ng-class="className"><span ng-bind-html-unsafe="title"></span><div class="close"><i class="icon-remove-circle icon-large"></i></div></div>',link:function(c,d){var e,f,g,h,i;return c.showNotification=!1,h=function(a){var g;return c.notification=angular.copy(a),c.title=a.title,c.className=e(a.type),c.$$phase||c.$apply(),g=$(d[0]).find(".urgent-notification"),g.css({display:"block",top:-100}),g.animate({top:25},"slow",function(){return b(function(){return f()},3e3)})},g=!1,f=function(){return g?void 0:(g=!0,a.markAsRead(c.notification),$(d[0]).find(".urgent-notification").fadeOut("slow",i))},$(d[0]).find(".close").bind("click",function(){return f()}),e=function(a){return"error"===a||"urgent"===a?"orange":"pending"===a||"info"===a?"blue":"success"===a?"green":"blue"},i=function(){var a,b,d,e,f;for(g=!1,e=c.allNotifications,f=[],b=0,d=e.length;d>b;b++)if(a=e[b],a.read)f.push(void 0);else if("active"===a.display){if(null!=c.notification&&a.id===c.notification.id)continue;f.push(h(a))}else f.push(void 0);return f},c.$watch("allNotifications",function(a,b){return a!==b?i():void 0},!0),c.allNotifications=a.all(),i()}}})})}).call(this),function(){define(["app"],function(a){return a.directive("stickyNotification",function(a){return{restrict:"E",template:'<div ng-show="showNotification" class="urgent-notification sticky" ng-class="className"><span ng-bind-html-unsafe="title"></span><div class="close"><i class="icon-remove-circle icon-large"></i></div></div>',link:function(b,c){var d,e,f;return b.showNotification=!1,e=function(a){return $(c[0]).find(".urgent-notification").slideUp("slow","linear",function(){return b.notification=a,b.title=a.title,b.className=d(a.type),b.$$phase||b.$apply(),$(c[0]).find(".urgent-notification").slideDown("slow","linear")})},$(c[0]).find(".close").bind("click",function(){return a.markAsRead(b.notification),$(c[0]).find(".urgent-notification").slideUp("slow","linear",f)}),d=function(a){return"error"===a||"urgent"===a?"orange":"pending"===a||"info"===a?"blue":"success"===a?"green":"blue"},f=function(){var a,c,d,f,g;for(f=b.allNotifications,g=[],c=0,d=f.length;d>c;c++)if(a=f[c],a.read)g.push(void 0);else if("sticky"===a.display&&"urgent"===a.type){if(null!=b.notification&&a.id===b.notification.id)continue;g.push(e(a))}else g.push(void 0);return g},b.$watch("allNotifications",function(a,b){return a!==b?f():void 0},!0),b.allNotifications=a.all(),f()}}})})}.call(this),function(){define(["app"],function(a){a.service("Notifications",function(a){a.notifications=[],this.all=function(){return a.notifications},this.unread=function(){var b,c,d,e,f;for(c=[],f=a.notifications,d=0,e=f.length;e>d;d++)b=f[d],b.read||c.push(b);return c},this.read=function(){var b,c,d,e,f;for(c=[],f=a.notifications,d=0,e=f.length;e>d;d++)b=f[d],b.read&&c.push(b);return c},this.markAllAsRead=function(){var b,c,d,e;for(e=a.notifications,c=0,d=e.length;d>c;c++)b=e[c],b.read=!0},this.markAsRead=function(b){var c,d,e,f,g;for(f=a.notifications,g=[],d=0,e=f.length;e>d;d++)c=f[d],c.id===b.id?g.push(c.read=!0):g.push(void 0);return g},this.show=function(b){a.notifications.unshift(b)}})})}.call(this),function(){define(["app"],function(a){a.service("NotificationsStore",function(a,b){this.error_sending_message=function(){return this.getNotification("error","notification_error_sending_message","active",!1)},this.login_failed=function(){return this.getNotification("error","notification_login_failed","active",!1)},this.wrong_email_or_password=function(){return this.getNotification("error","notification_wrong_email_or_password","active",!1)},this.error_uploading_file=function(a){return this.getNotification("error","notification_error_uploading_file","active",!1,{error:a})},this.sms_sent=function(a){return this.getNotification("info","notification_sms_sent","active",!1,{phone:a})},this.another_sms_sent=function(){return this.getNotification("info","notification_another_sms_sent","active",!1)},this.error_sending_message=function(){return this.getNotification("error","notification_error_sending_message","active",!1)},this.success_confirm_registration=function(){return this.getNotification("success","notification_success_confirm_registration","active",!1)},this.session_expired=function(){return this.getNotification("info","notification_session_expired","active",!1)},this.success_upload=function(){return this.getNotification("success","notification_success_upload","active",!1)},this.check_email=function(){return this.getNotification("info","notification_check_email","active",!1)},this.error_updating_account=function(a){return this.getNotification("error","notification_error_updating_account","active",!1,{error:a})},this.account_updated=function(){return this.getNotification("success","notification_account_updated","active",!1)},this.success_password_change=function(){return this.getNotification("success","notification_success_password_change","active",!1)},this.fail_password_change=function(){return this.getNotification("error","notification_fail_password_change","active",!1)},this.invalid_access_code=function(){return this.getNotification("error","notification_invalid_access_code","active",!1)},this.missing_order_id=function(){return this.getNotification("error","notification_missing_order_id","active",!1)},this.order_canceled=function(){return this.getNotification("error","notification_order_canceled","active",!1)},this.total_order_error=function(){return this.getNotification("error","notification_total_order_error","active",!1)},this.error_processing_order=function(){return this.getNotification("error","notification_error_processing_order","active",!1)},this.market_order_unavailable=function(){return this.getNotification("info","notification_market_order_unavailable","active",!1)},this.market_order_available_again=function(){return this.getNotification("info","notification_market_order_available_again","active",!1)},this.buy_order_confirmed=function(){return this.getNotification("success","notification_buy_order_confirmed","active",!0)},this.sell_order_confirmed=function(){return this.getNotification("success","notification_sell_order_confirmed","active",!0)},this.something_went_wrong=function(){return this.getNotification("error","notification_something_went_wrong","active",!1)},this.error_cancelling_order=function(){return this.getNotification("error","notification_error_cancelling_order","active",!1)},this.congrats_please_register=function(){return this.getNotification("success","notification_congrats_please_register","active",!1)},this.success_order_cancel=function(){return this.getNotification("success","notification_success_order_cancel","active",!0)},this.password_reset_instructions_sent=function(a){return this.getNotification("info","notification_password_reset_instructions_sent","active",!1,{email:a})},this.signed_up_early_access=function(){return this.getNotification("success","notification_signed_up_early_access","active",!1)},this.new_buy_order_processing=function(){return this.getNotification("info","notification_new_buy_order_processing","active",!0)},this.new_sell_order_processing=function(){return this.getNotification("info","notification_new_sell_order_processing","active",!0)},this.thanks=function(){return this.getNotification("info","notification_thanks","active",!1)},this.deposits_sent=function(){return this.getNotification("success","notification_deposits_sent","active",!0)},this.success_bank_account_verified=function(){return this.getNotification("success","notification_success_bank_account_verified","active",!0)},this.success_bank_account_deleted=function(){return this.getNotification("info","notification_success_bank_account_deleted","active",!0)},this.error_deleting_bank_account=function(){return this.getNotification("error","notification_error_deleting_bank_account","active",!1)},this.success_logout=function(){return this.getNotification("info","notification_success_logout","active",!1)},this.bank_account_should_be_funded=function(){return this.getNotification("success","notification_bank_account_should_be_funded","active",!0)},this.buttercoin_account_should_be_funded=function(){return this.getNotification("success","notification_buttercoin_account_should_be_funded","active",!0)},this.verification_request_received=function(){return this.getNotification("info","notification_verification_request_received","active",!0)},this.getNotification=function(a,c,d,e,f){return null==f&&(f={}),{id:Math.floor(999999*Math.random()),title:this.postProcessMessage(b("translate")(c,!0),f),description:"",read:!1,type:a,display:d,date:(new Date).getTime(),showInDropdown:e,button:{title:"",url:""}}},this.postProcessMessage=function(a,b){return a=a.replace(/\[blue\]([^\[]*)\[\/blue\]/,'<span class="notif-blue">$1</span>'),a=a.replace(/\[green\]([^\[]*)\[\/green\]/,'<span class="notif-green">$1</span>'),a=a.replace(/(\$[^ ]+)/g,function(a){return b[a.slice(1)]})}})})}.call(this);